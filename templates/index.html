<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Notre Dame Football â€” News and Feeds</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="banner">
    <img src="{{ url_for('static', filename='notredame-logo.png') }}" alt="Notre Dame Logo" class="team-logo">
    <div class="banner-text">
      <h1>Notre Dame Football</h1>
      <p class="updated">Updated: {{ updated }}</p>
    </div>
    <button id="fight-song" class="fight-button">Victory March</button>
  </header>

  <nav class="buttons">
    {% for link in links %}
      <a href="{{ link.url }}" target="_blank" class="btn">{{ link.name }}</a>
    {% endfor %}
  </nav>

  <section class="filter-bar">
    <label for="sourceSelect"><strong>News sources:</strong></label>
    <select id="sourceSelect">
      <option value="all">All sources</option>
      {% for src in sources %}
        <option value="{{ src }}">{{ src }}</option>
      {% endfor %}
    </select>
  </section>

  <main id="articles">
    {% for item in items %}
      <article class="card" data-source="{{ item.source }}">
        <h2><a href="{{ item.link }}" target="_blank">{{ item.title }}</a></h2>
        {% if item.summary %}
          <p>{{ item.summary }}</p>
        {% endif %}
        <footer>
          <span class="source">{{ item.source }}</span>
          <span class="date">{{ item.published }}</span>
        </footer>
      </article>
    {% endfor %}
  </main>

  <script>
    // Fight song audio
    const audio = new Audio("{{ url_for('static', filename='fight-song.mp3') }}");
    const fightBtn = document.getElementById("fight-song");

    fightBtn.addEventListener("click", () => {
      if (audio.paused) {
        audio.play();
        fightBtn.textContent = "Pause";
      } else {
        audio.pause();
        fightBtn.textContent = "Victory March";
      }
    });

    // Source filter
    const sourceSelect = document.getElementById("sourceSelect");
    sourceSelect.addEventListener("change", () => {
      const selected = sourceSelect.value;
      document.querySelectorAll(".card").forEach(card => {
        if (selected === "all" || card.dataset.source === selected) {
          card.style.display = "block";
        } else {
          card.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>